<h1>Home</h1>

<h2>見方</h2>
<p>
  例) 2-2 3-3 15ms <br>
  スイッチ2のポート2と, スイッチ3のポート3がつながっていて, 遅延量は15msです
</p>

<!-- 無理矢理リロードするよ -->
<!-- <script>
setInterval("location.reload()",30000);
</script> -->

<div id="mynetwork"></div>
<script>
let topology = gon.topologies

// スイッチ情報だけ取り出す
var a = []
var b = []
for (var i=1; i<=topology.length; ++i) {
  a[a.length] = topology[i-1].dp_port1.split("-")[0];
  b[b.length] = topology[i-1].dp_port2.split("-")[0];
}

// 配列の結合
a = a.concat(b);

// 重複を取り除く
const distinctSwitch = a.reduce(
  (distinct, num) =>
    (distinct.indexOf(num) !== -1) ? distinct : [...distinct, num]
  , []
)
</script>

<%= render :partial => "display" %>
